<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ButtonType?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DialogPane?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.RowConstraints?>

<DialogPane xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.dut.filestorage.client.ShareDialogController"
            headerText="Share Options" prefWidth="450">
    <content>
        <VBox spacing="10">
            <children>
                <Label fx:id="fileNameLabel" style="-fx-font-weight: bold;"/>
                <TabPane tabClosingPolicy="UNAVAILABLE">
                    <tabs>
                        <Tab text="Share with User">
                            <content>
                                <VBox spacing="10" style="-fx-padding: 20;">
                                    <children>
                                        <Label text="Enter username to share with:"/>
                                        <TextField fx:id="usernameField" promptText="Username"/>
                                    </children>
                                </VBox>
                            </content>
                        </Tab>
                        <Tab text="Create Public Link">
                            <content>
                                <GridPane hgap="10" vgap="15" style="-fx-padding: 20;">
                                    <columnConstraints>
                                        <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0"/>
                                        <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="200.0"/>
                                    </columnConstraints>
                                    <rowConstraints>
                                        <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES"/>
                                        <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES"/>
                                        <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES"/>
                                        <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES"/>
                                    </rowConstraints>
                                    <children>
                                        <!-- Hàng Mật khẩu -->
                                        <CheckBox fx:id="passwordCheckBox" text="Set Password" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                                        <PasswordField fx:id="passwordField" promptText="Enter password" GridPane.columnIndex="1" GridPane.rowIndex="0"/>
                                        
                                        <!-- Hàng Hết hạn -->
                                        <CheckBox fx:id="expiresCheckBox" text="Set Expiration" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                                        <HBox alignment="CENTER_LEFT" spacing="5.0" GridPane.columnIndex="1" GridPane.rowIndex="1">
                                            <children>
                                                <TextField fx:id="expiresTimeField" prefWidth="80.0" promptText="e.g., 24"/>
                                                <ComboBox fx:id="expiresUnitComboBox" prefWidth="120.0"/>
                                            </children>
                                        </HBox>
                                        
                                        <!-- Hàng Nút Generate -->
                                        <Button onAction="#onGenerateLinkClick" text="Generate Link" GridPane.columnSpan="2" GridPane.halignment="CENTER" GridPane.rowIndex="2"/>
                                        
                                        <!-- Hàng Hiển thị Link -->
                                        <TextField fx:id="generatedLinkField" editable="false" promptText="Token will appear here..." GridPane.columnSpan="2" GridPane.rowIndex="3"/>
                                    </children>
                                </GridPane>
                            </content>
                        </Tab>
                    </tabs>
                </TabPane>
            </children>
        </VBox>
    </content>
    <buttonTypes>
        <ButtonType fx:id="shareUserButton" text="Share with User" buttonData="OK_DONE"/>
        <ButtonType text="Close" buttonData="CANCEL_CLOSE"/>
    </buttonTypes>
</DialogPane>